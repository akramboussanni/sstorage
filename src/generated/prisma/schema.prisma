generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
  output          = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model User {
  id                 String   @id @default(uuid())
  username           String   @unique
  password           String
  isAdmin            Boolean  @default(false)
  mustChangePassword Boolean  @default(false)
  createdAt          DateTime @default(now())
  media              Media[]
}

model Media {
  id              String   @id @default(uuid())
  filename        String
  originalName    String
  mimeType        String
  size            Int
  ip              String?
  userId          String?
  user            User?    @relation(fields: [userId], references: [id])
  isPrivate       Boolean  @default(false)
  transcodeStatus String   @default("not_required") // pending, processing, completed, failed, not_required
  transcodeError  String?
  createdAt       DateTime @default(now())
}

model Settings {
  id                String  @id @default("default")
  allowPublicUpload Boolean @default(false)
  allowRegistration Boolean @default(false)
  smtpHost          String?
  smtpPort          Int?
  smtpUser          String?
  smtpPassword      String?
  smtpFrom          String?
}
